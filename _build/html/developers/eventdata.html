

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Connect information with visitor profile &mdash; IQNOMY 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="IQNOMY 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Developers" href="index.html"/>
        <link rel="next" title="Google event tracking" href="google.html"/>
        <link rel="prev" title="&lt;no title&gt;" href="crossdomain.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> IQNOMY</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../starthere/index.html">Start here</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../starthere/fiveminute.html">Five minute install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../starthere/gettingstarted.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../starthere/whyiqnomy.html">Why IQNOMY?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../administrators/index.html">Administrators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../administrators/containers.html">Containers</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="integration.html">Integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="script.html">Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html">Rules</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Connect information with visitor profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ecommerce-site-integration">Ecommerce site integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="google.html">Google event tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="google.html#analytics-filter-iqnomy-crawl">Analytics filter IQNOMY crawl</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html">Omniture</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html#layout-liquid-content">Layout liquid content</a></li>
<li class="toctree-l2"><a class="reference internal" href="magento.html">IQNOMY Magento extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theoryconcepts/index.html">Theory &amp; concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../theoryconcepts/platform.html">Platform</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/faq.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apis/index.html">APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apis/profiles.html">Profiles</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">IQNOMY</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developers</a> &raquo;</li>
      
    <li>Connect information with visitor profile</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/developers/eventdata.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="connect-information-with-visitor-profile">
<h1>Connect information with visitor profile<a class="headerlink" href="#connect-information-with-visitor-profile" title="Permalink to this headline">¶</a></h1>
<p>Input of information into the visitor profile can be used if other information is being gathered about this user.</p>
<p>e.g.
<a href="#id1"><span class="problematic" id="id2">*</span></a>CRM information
<a href="#id3"><span class="problematic" id="id4">*</span></a>Information about from campaigns
<a href="#id5"><span class="problematic" id="id6">*</span></a>Other identifiers
<a href="#id7"><span class="problematic" id="id8">*</span></a>Form input
<a href="#id9"><span class="problematic" id="id10">*</span></a>Profiles from other applications
<a href="#id11"><span class="problematic" id="id12">*</span></a>etc.</p>
<p>Make sure that the things you do are legal looking at privacy of your anonymous visitor. It&#8217;s your responsibility that the visitors privacy is being respected. We can disconnect IQNOMY if we suspect any legal rights are being violated.</p>
<p>Gathering data:
<a href="#id13"><span class="problematic" id="id14">*</span></a>Using a javascript as trackingpixel the data can be put into the URL. We will receive this URL visited and extract this data. e.g. <a class="reference external" href="http://www.iqnomy.com/index.html?Campaign_data=name_of_campaign">http://www.iqnomy.com/index.html?Campaign_data=name_of_campaign</a>
<a href="#id15"><span class="problematic" id="id16">*</span></a>If you don&#8217;t want the visitor to see this information you can put the data into the URL that is being used in the javascript. It can be different from the URL the visitors see in their browsers. The visitor can still see the information when he looks into the page source.
<a href="#id17"><span class="problematic" id="id18">*</span></a>A third option is to use webservices</p>
<p>=Methods to register data=
There are 3 ways to add data to the profile:
#[[Webservices#REST|REST api]]
#Page-load
#TrackEvent</p>
<p>==Example 1 - Sending eventdata at pageload==</p>
<dl class="docutils">
<dt>prerequisite: The eventdata needs to be set and available before the IQNOMY script is loaded</dt>
<dd><p class="first">&lt;nowiki&gt;
&lt;scrip&gt;</p>
<p>_iqsEventData = new Object();
_iqsEventData[&#8220;page_type&#8221;] = “home”</p>
<p class="last">&lt;script&gt;
&lt;/nowiki&gt;</p>
</dd>
</dl>
<p>==Example 2 - Sending eventdata manually (from the client using javascript)==</p>
<dl class="docutils">
<dt>prerequisite:  The IQNOMY script needs to be loaded before able to call functions on the IQImpressor object.</dt>
<dd><p class="first">&lt;nowiki&gt;
&lt;script&gt;</p>
<p>var eventData = new Object();
eventData[&#8220;page_type&#8221;] = “home”
IQImpressor.trackEvent(_iqsTenant, &#8216;WEBSHOP&#8217;, eventData);</p>
<p class="last">&lt;script&gt;
&lt;/nowiki&gt;</p>
</dd>
</dl>
<p>==Example 3 - Combine sending eventdata at pageload and sending it manually==</p>
<ul class="simple">
<li>If you are unsure when the eventdata is available during the pageload you can use this</li>
</ul>
<p>option to be sure eventdata will be send to IQNOMY</p>
<blockquote>
<div><p>&lt;nowiki&gt;
&lt;script&gt;</p>
<p>var eventData = new Object();
eventData[&#8220;page_type&#8221;] = “home”;</p>
<p>// If IQNOMY script is not loaded let the script pickup the data when the script loads
if(typeof IQImpressor === &#8220;undefined&#8221;) {</p>
<blockquote>
<div>_iqsEventData = eventData;
console.log(&#8220;Saving EventData to be picked up later.&#8221;);</div></blockquote>
<p>// Else send it manually
}else{</p>
<blockquote>
<div>IQImpressor.trackEvent(_iqsTenant, &#8216;WEBSHOP&#8217;, eventData);
console.log(&#8220;Sending EventData manually.&#8221;);</div></blockquote>
<p>}</p>
<p>&lt;script&gt;
&lt;/nowiki&gt;</p>
</div></blockquote>
<p>=Custom events=
This example is also used in [[Identifying_iqnomy_visitors_using_custom_id]]
You can also assign the external id manually. By using the IQImpressor Javascript object, available after the IQNOMY script is initiated, you can manually track an event. By calling
IQImpressor.trackEvent(tenantId,eventName,eventdata) you can trigger an event that will link a custom external id, to the visitor visiting your website.</p>
<blockquote>
<div><p>example:</p>
<p>&lt;script type=&#8221;text/javascript&#8221;&gt;</p>
<blockquote>
<div><p>var tenantId = _iqsTenant
var eventName = &#8216;FORM&#8217;
var eventdata = new Object();</p>
<blockquote>
<div>eventdata[&#8220;_iqExternalVisitorId&#8221;] = &#8220;company_user_id_1&#8221;;</div></blockquote>
<p>// You can only call this function after the IQNOMY has initialised.
IQImpressor.trackEvent(tenantId,eventName,eventdata);</p>
<p>var _iqExternalVisitorId = &#8220;company_user_id_1&#8221;; &lt;/script&gt;</p>
</div></blockquote>
</div></blockquote>
<p>You can use both methods combined, but make sure that the given custom id is consistent, or external id of the visitor will change with the use of each method. Currently a IQNOMY user can only have one unique external id.</p>
<p>IQNOMY tracks visitors anonymously, so we advice not to use any privacy-sensitive custom id as an external id, like emailadresses.</p>
<dl class="docutils">
<dt>==Multiple events==</dt>
<dd><p class="first">&lt;nowiki&gt;
var eventData = new Object();</p>
<p class="last">eventData[&#8220;name&#8221;] = “christian”
eventData[&#8220;customer&#8221;] = “true”
eventData[&#8220;productid&#8221;] = “40”
IQImpressor.trackEvent(_iqsTenant, &#8216;WEBSHOP&#8217;, eventData);
&lt;/nowiki&gt;</p>
</dd>
</dl>
<p>=REST API=</p>
<p>[[Webservices#REST]]</p>
<p>=Standard key / values=
IQNOMY can use a standard set of key values. Based on those key/values standard rules are used. The key values will be connected in the IQNOMY platform in the right way to the user. The values are used also in the [[IQNOMY Magento extension]].</p>
<p>You can also track your visitors with the [[Ecommerce_site_integration]]</p>
</div>
<div class="section" id="ecommerce-site-integration">
<h1>Ecommerce site integration<a class="headerlink" href="#ecommerce-site-integration" title="Permalink to this headline">¶</a></h1>
<p>Our IQNOMY script can already track a lot on the website. But to make tracking even better and richer we provide the following layouts:
* [[#Standard webshop layout|Standard webshop layout]]
* [[#Standard leisure layout|Standard leisure layout]]
* [[#Custom layout|Custom layout]]</p>
<p>For [[IQNOMY_Magento_extension|Magento]] we already created our standard plugin that does this.</p>
<p>If you want to know how you can register these standard layouts. Read more in [[Register_event_data]]</p>
<p>=Standard webshop layout=
Every page in the frontend needs to enclose the [[Tracking integration with website|standard IQNOMY script]] just before the closing &lt;/body&gt; tag. This standard IQNOMY script will track all the normal pageviews through a Javascript. Next to these page views the following events will be tracked.</p>
<blockquote>
<div><p>If a visitor registers a new account (account=register)
If a visitor logs in (account=login)
If a visitor subscribes for a newsletter (newsletter=true)
If a visitor posts a contact form (contactform=true)
If a visitor changes the content of a shopping cart (cart_changed=true, subtotal=&lt;bedrag&gt;, orderrows=[{product_id:&lt;id&gt;,quantity:&lt;aantal&gt;,price:&lt;bedrag&gt;}, ...])
If a visitor does a checkout of the order (checkout=true)</p>
<p>If a visitor visits the homepage (page_type=home)
If a visitor visits a CMS page (page_type=info)
If a visitor visits a category page (page_type=overview, category_id=&lt;id&gt;)
If a visitor visits a product detail page (page_type=detail, product_id=&lt;id&gt;, category_id=&lt;id&gt;, &lt;dimension&gt;=&lt;value&gt;, ...)
If a visitor visits the shopping cart (page_type=shoppingcart)
If a visitor visits the order page (page_type=checkout)
If a visitor visits the search result page (page_type=search, search=&lt;zoekterm&gt;)
If a visitor visits the wish list (page_type=wishlist, products=[{product_id:&lt;id&gt;,category_id:&lt;id&gt;,&lt;dimension&gt;:&lt;value&gt;,...}])
If a visitor visits the product comparison (page_type=compare, products=[{product_id:&lt;id&gt;,category_id:&lt;id&gt;,&lt;dimension&gt;:&lt;value&gt;,...}])</p>
<p>If a visitor on product detail page clicks the tab Product properties (details=attributes)
If a visitor on product detail page clicks the tab Reviews (details=reviews)
If the filters on a category page are used by a visitor (filter=true, &lt;dimension&gt;=&lt;value&gt;, …)
If the sorting on the category page is used (order=&lt;dimension&gt;, direction=asc/desc)</p>
</div></blockquote>
<p>=Standard leisure layout=</p>
<ul class="simple">
<li>Campagne</li>
<li>OrientationPhase</li>
<li>Vacationperiod</li>
<li>Location</li>
<li>Activity</li>
<li>Composition group</li>
<li>Funnel</li>
<li>Funnel fallout</li>
<li>Adults</li>
<li>Cottages</li>
<li>Children</li>
<li>Animals</li>
<li>Type accommondation</li>
<li>Amount bedrooms</li>
</ul>
<p>If you want a custom layout you can contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;iqnomy&#46;com">support<span>&#64;</span>iqnomy<span>&#46;</span>com</a>
* Type visitor
* Type consumer
* Last booking</p>
<p>=Custom layout=</p>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="google.html" class="btn btn-neutral float-right" title="Google event tracking"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="crossdomain.html" class="btn btn-neutral" title="&lt;no title&gt;"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Christian Vriens.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>