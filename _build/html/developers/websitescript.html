

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Websitescript &mdash; IQNOMY 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="IQNOMY 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Developers" href="index.html"/>
        <link rel="next" title="Profile" href="profile.html"/>
        <link rel="prev" title="Developers" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> IQNOMY
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../starthere/index.html">Start here</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../starthere/fiveminute.html">Five minute install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../starthere/gettingstarted.html">Getting started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../administrators/index.html">Administrators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../administrators/useraccount.html">User account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administrators/liquidaccount.html">Liquid Account</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/index.html">Integrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../integrations/website.html">Website</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/magento.html">Magento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/seoshop.html">SEOshop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/mailchimp.html">Mailchimp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/mailplus.html">Mailplus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/copernica.html">Copernica</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Websitescript</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filter-ip-adress">Filter IP adress</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#event-data">Event data</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html">Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html#liquid-content">Liquid content</a></li>
<li class="toctree-l2"><a class="reference internal" href="thirdparty.html">Third-party</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apis/index.html">APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apis/apis.html">How to use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/apis.html#profiles">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/apis.html#event-api">Event api</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apis/hooks.html">Software hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/faq.html">English FAQ&#8217;s</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/faq.html#nederlandse-faq-s">Nederlandse FAQ&#8217;s</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/usecases.html">Usecases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/google.html">Google</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/extradocumentation.html">Extra documentation</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">IQNOMY</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developers</a> &raquo;</li>
      
    <li>Websitescript</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="websitescript">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">Websitescript</a><a class="headerlink" href="#websitescript" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#websitescript" id="id2">Websitescript</a><ul>
<li><a class="reference internal" href="#basic-script-functionality" id="id3">Basic script functionality</a><ul>
<li><a class="reference internal" href="#standard-tracking-script-implementation" id="id4">Standard tracking script implementation</a></li>
<li><a class="reference internal" href="#body-script" id="id5">BODY script</a></li>
<li><a class="reference internal" href="#check-if-the-script-is-implemented" id="id6">Check if the script is implemented</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visitor-identification" id="id7">Visitor identification</a><ul>
<li><a class="reference internal" href="#basic-visitor-identification" id="id8">Basic visitor identification</a></li>
<li><a class="reference internal" href="#custom-id-s" id="id9">Custom id&#8217;s</a><ul>
<li><a class="reference internal" href="#option-1-a-global-javascript-variable" id="id10">Option 1: a global Javascript variable</a></li>
<li><a class="reference internal" href="#option-2-html-query-string-paramameter" id="id11">Option 2 HTML query string paramameter</a></li>
<li><a class="reference internal" href="#option-3-using-the-iqimpressor-javascript-object" id="id12">Option 3: using the IQImpressor Javascript object</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#extra-functionality" id="id13">Extra functionality</a><ul>
<li><a class="reference internal" href="#xpath-finder" id="id14">Xpath finder</a></li>
<li><a class="reference internal" href="#preview-with-underline" id="id15">Preview with underline</a></li>
<li><a class="reference internal" href="#cross-domain-tracking" id="id16">Cross domain tracking</a><ul>
<li><a class="reference internal" href="#usage" id="id17">Usage</a></li>
<li><a class="reference internal" href="#considerations" id="id18">Considerations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-script" id="id19">Customizing the script</a><ul>
<li><a class="reference internal" href="#client-side-liquid-internet" id="id20">Client side liquid internet</a></li>
<li><a class="reference internal" href="#tracking-mailto" id="id21">Tracking mailto</a></li>
<li><a class="reference internal" href="#synchronous-script" id="id22">Synchronous script</a></li>
<li><a class="reference internal" href="#website-listener" id="id23">Website listener</a></li>
<li><a class="reference internal" href="#external-visitor-id" id="id24">External visitor id</a></li>
<li><a class="reference internal" href="#extra-custom-javascript-script" id="id25">Extra custom javascript script</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-data-with-websitescript" id="id26">Event data with websitescript</a><ul>
<li><a class="reference internal" href="#different-methods" id="id27">Different methods</a><ul>
<li><a class="reference internal" href="#example-1-sending-eventdata-at-pageload" id="id28">Example 1 - Sending eventdata at pageload</a></li>
<li><a class="reference internal" href="#example-2-sending-eventdata-manually" id="id29">Example 2 - Sending eventdata manually</a></li>
<li><a class="reference internal" href="#example-3-combine-sending-eventdata-at-pageload-and-sending-it-manually" id="id30">Example 3 - Combine sending eventdata at pageload and sending it manually</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-events" id="id31">Custom events</a><ul>
<li><a class="reference internal" href="#multiple-events" id="id32">Multiple events</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-with-event-data" id="id33">Testing with event data</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#filter-ip-adress" id="id34">Filter IP adress</a></li>
</ul>
</div>
<div class="section" id="basic-script-functionality">
<h2><a class="toc-backref" href="#id3">Basic script functionality</a><a class="headerlink" href="#basic-script-functionality" title="Permalink to this headline">¶</a></h2>
<div class="section" id="standard-tracking-script-implementation">
<h3><a class="toc-backref" href="#id4">Standard tracking script implementation</a><a class="headerlink" href="#standard-tracking-script-implementation" title="Permalink to this headline">¶</a></h3>
<p>Standard implementation of the script can be done by a webmaster. He will implement the script in the source code of your website. Normally this is done in a website template.</p>
<ul class="simple">
<li>Asynchronious to prevent page loading problems</li>
<li>Can be placed with the Google tagmanager</li>
<li>Should be on every page where you want to follow your customers</li>
</ul>
</div>
<div class="section" id="body-script">
<h3><a class="toc-backref" href="#id5">BODY script</a><a class="headerlink" href="#body-script" title="Permalink to this headline">¶</a></h3>
<p>Make sure the BODY script is placed in between the body tags. Normally a tracking script is being implemented just before the &lt;/body&gt;.</p>
<img alt="../_images/BODYScript.png" src="../_images/BODYScript.png" />
<p>Every BODY script has a customer specific number! Yours is in the email you receive after registering a MyLiquidSuite.</p>
</div>
<div class="section" id="check-if-the-script-is-implemented">
<h3><a class="toc-backref" href="#id6">Check if the script is implemented</a><a class="headerlink" href="#check-if-the-script-is-implemented" title="Permalink to this headline">¶</a></h3>
<p>If the standard script is implemented you can check this yourself by opening your website in you browser. Right-click your mouse and open &#8216;source website&#8217;.</p>
<p>When you see the source of your website you can check by search in this txt for &#8216;iqnomy&#8217;. If you search in the txt for &#8216;iqnomy&#8217; this will show you the BODY-script.</p>
<p>If IQNOMY tells you that you are still not connected check if the number in the BODY-script is the same as the number in your Liquid Account. Still problems then email us at <a class="reference external" href="mailto:support&#37;&#52;&#48;iqnomy&#46;com">support<span>&#64;</span>iqnomy<span>&#46;</span>com</a></p>
</div>
</div>
<div class="section" id="visitor-identification">
<h2><a class="toc-backref" href="#id7">Visitor identification</a><a class="headerlink" href="#visitor-identification" title="Permalink to this headline">¶</a></h2>
<p>For each visitor, IQNOMY uses a unique visitor id to track the pagevisits of a visitor on a tenants website.
To have more insight into who is visiting your website you can link an custom external id to the visitor.
There are 3 options available to do this.</p>
<div class="section" id="basic-visitor-identification">
<h3><a class="toc-backref" href="#id8">Basic visitor identification</a><a class="headerlink" href="#basic-visitor-identification" title="Permalink to this headline">¶</a></h3>
<p>The id of the visitor will be set in a cookie</p>
</div>
<div class="section" id="custom-id-s">
<h3><a class="toc-backref" href="#id9">Custom id&#8217;s</a><a class="headerlink" href="#custom-id-s" title="Permalink to this headline">¶</a></h3>
<div class="section" id="option-1-a-global-javascript-variable">
<h4><a class="toc-backref" href="#id10">Option 1: a global Javascript variable</a><a class="headerlink" href="#option-1-a-global-javascript-variable" title="Permalink to this headline">¶</a></h4>
<p>To add an custom id to an IQNOMY visitor you can add a global Javascript variable _iqExternalVisitorId to your webpage. The Javascript variable will be processed by the IQNOMY script and the value will be linked to the visitor.
Make sure that the variable is initiated on the webpage before the IQNOMY is processed, otherwise the _iqExternalVisitorId will not be processed automatically.</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script type=&quot;text/javascript&quot;&gt;
     var _iqExternalVisitorId = &quot;company_user_id_1&quot;; &lt;/script&gt;
</pre></div>
</div>
</div>
<div class="section" id="option-2-html-query-string-paramameter">
<h4><a class="toc-backref" href="#id11">Option 2 HTML query string paramameter</a><a class="headerlink" href="#option-2-html-query-string-paramameter" title="Permalink to this headline">¶</a></h4>
<p>Alternatively you can add a HTML query string paramameter, _iqExternalVisitorId,to your webpage url. The value of the parameter will be linked to the visitor and can be used as the external visitor id.
Contact us if you want to use this method, so that we can enable this feature.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">www</span><span class="p">.</span><span class="nx">mywebsite</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">home</span><span class="o">?</span><span class="nx">_iqExternalVisitorId</span><span class="o">=</span><span class="nx">company_user_id_1</span>
</pre></div>
</div>
</div>
<div class="section" id="option-3-using-the-iqimpressor-javascript-object">
<h4><a class="toc-backref" href="#id12">Option 3: using the IQImpressor Javascript object</a><a class="headerlink" href="#option-3-using-the-iqimpressor-javascript-object" title="Permalink to this headline">¶</a></h4>
<p>You can also assign the external id manually. By using the IQImpressor Javascript object, available after the IQNOMY script is initiated, you can manually track an event. By calling
IQImpressor.trackEvent(tenantId,eventName,eventdata) you can trigger an event that will link a custom external id, to the visitor visiting your website.</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script type=&quot;text/javascript&quot;&gt;

      var tenantId = _iqsTenant
      var eventName = &#39;FORM&#39;
      var eventdata = new Object();
          eventdata[&quot;_iqExternalVisitorId&quot;] = &quot;company_user_id_1&quot;;

      // You can only call this function after the IQNOMY has initialised.
      IQImpressor.trackEvent(tenantId,eventName,eventdata);

      var _iqExternalVisitorId = &quot;company_user_id_1&quot;; &lt;/script&gt;
</pre></div>
</div>
<p>You can use both methods combined, but make sure that the given custom id is consistent, or external id of the visitor will change with the use of each method. Currently a IQNOMY user can only have one unique external id.</p>
<p>We advice not to use any privacy-sensitive custom id as an external id, like emailadresses.</p>
</div>
</div>
</div>
<div class="section" id="extra-functionality">
<h2><a class="toc-backref" href="#id13">Extra functionality</a><a class="headerlink" href="#extra-functionality" title="Permalink to this headline">¶</a></h2>
<div class="section" id="xpath-finder">
<h3><a class="toc-backref" href="#id14">Xpath finder</a><a class="headerlink" href="#xpath-finder" title="Permalink to this headline">¶</a></h3>
<p>Solution
An URL extended with a link where the user can open the webpage to select the location of the page.</p>
<p>An url-argument is automatically added to the url <strong>iqxpselect=true</strong>, this will trigger the xpath-selection javascript included in the impression-script.</p>
</div>
<div class="section" id="preview-with-underline">
<h3><a class="toc-backref" href="#id15">Preview with underline</a><a class="headerlink" href="#preview-with-underline" title="Permalink to this headline">¶</a></h3>
<p>Add the parameters:
iqprvw and iqprvwborder to your url.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">iqprvw=(containerid):(liquidcontentid):(xpath)</p>
</div>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">URL</span><span class="o">?</span><span class="nx">iqprvw</span><span class="o">=</span><span class="mi">1791</span><span class="o">:</span><span class="mi">16608</span><span class="o">:</span><span class="c1">//div[@id=&quot;liquid&quot;]&amp;iqprvwborder=1</span>
</pre></div>
</div>
<p>You can also make use of the IQNOMY api and create your own javascript plugin. For more information contact <a class="reference external" href="mailto:support&#37;&#52;&#48;iqnomy&#46;com">support<span>&#64;</span>iqnomy<span>&#46;</span>com</a></p>
</div>
<div class="section" id="cross-domain-tracking">
<h3><a class="toc-backref" href="#id16">Cross domain tracking</a><a class="headerlink" href="#cross-domain-tracking" title="Permalink to this headline">¶</a></h3>
<p>Companies can use there own identification accross domains. Also the IQNOMY id can be used accross domains.</p>
<div class="section" id="usage">
<h4><a class="toc-backref" href="#id17">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>When you are on the www.vangilscomputer.nl and click a link that goes to the domain www.vangilscomputers.com. This is a different domain.</p>
<p>Add the new function IQImpressor.linkVisitor(this); to a onclick event of a link:</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;a href=&quot;http://www.vangilscomputers.com/&quot; onclick=&quot;IQImpressor.linkVisitor(this);&quot;&gt;www.vangilscomputers.com&lt;/a&gt;
</pre></div>
</div>
<p>When the user clicks on the link, this function will add two query-parameters to the url of the link, example: <a class="reference external" href="http://www.vangilscomputers.com/?&amp;_iqnomyvids=1234&amp;_iqnomyfids=4">http://www.vangilscomputers.com/?&amp;_iqnomyvids=1234&amp;_iqnomyfids=4</a>.</p>
<p>On the target page, these parameters will be read by our script and will create two session cookies with these values.
Our impression-script will prefer to use the visitor-id/follow-nr from the session cookies.</p>
<p>The function linkVisitor(obj) accepts different types of the obj param.</p>
<ul class="simple">
<li>For an a href-object, it will use the a.href field to manipulate the url.</li>
<li>For a form-object, it will use the form.action field to manipulate the url.</li>
<li>For a string-object, it will append the parameters to the string.</li>
<li>In all cases, it will return the manipulated url when succeeded.</li>
</ul>
</div>
<div class="section" id="considerations">
<h4><a class="toc-backref" href="#id18">Considerations</a><a class="headerlink" href="#considerations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>both domains should be approved in the website-list (like always)</li>
<li>both domains should contain the same integration script with the same tenant-id</li>
<li>the visitor will be followed across the other domain for this session only.</li>
<li>link with a hash-character might not work correctly</li>
<li>might conflict with other scripts on the website</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It can conflict with _gaq.push() when setAllowLinker=true is used in the Google script.</p>
</div>
</div>
</div>
</div>
<div class="section" id="customizing-the-script">
<h2><a class="toc-backref" href="#id19">Customizing the script</a><a class="headerlink" href="#customizing-the-script" title="Permalink to this headline">¶</a></h2>
<div class="section" id="client-side-liquid-internet">
<h3><a class="toc-backref" href="#id20">Client side liquid internet</a><a class="headerlink" href="#client-side-liquid-internet" title="Permalink to this headline">¶</a></h3>
<p>Client site the liquid container. You need to put the container id and the xpath id in the script.</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre>&lt;script&gt;
var _iqnomytenant = XXXXXXXXX;
var _iqnomyImpress = { hostAndPort: &quot;tracker.iqnomy.com&quot;, timeout: 5000, debug : true, containers : [
           { id : 913 ,xpath : &#39;//*[@id=&quot;liquidontainer913&quot;]&#39;}
           ]};
(function() {
var _iqs = document.createElement(&#39;script&#39;); _iqs.type = &#39;text/javascript&#39;; _iqs.async = true;
_iqs.src = (&#39;https:&#39; == document.location.protocol ? &#39;https://&#39; : &#39;http://&#39;) + &#39;static.iqnomy.com/myliquidsuite/js/IQImpressor.js&#39;;
   var s = document.getElementsByTagName(&#39;script&#39;)[0]; s.parentNode.insertBefore(_iqs, s);
 })();
&lt;/script&gt;
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="tracking-mailto">
<h3><a class="toc-backref" href="#id21">Tracking mailto</a><a class="headerlink" href="#tracking-mailto" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>JQuery in the page header, example use the next rule in the &lt;head&gt; of the page:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script type=&quot;text/javascript&quot; src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;
</pre></div>
</div>
<ul class="simple">
<li>Put in the iqnomy script the next variable:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">iqTrackMailto</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="synchronous-script">
<h3><a class="toc-backref" href="#id22">Synchronous script</a><a class="headerlink" href="#synchronous-script" title="Permalink to this headline">¶</a></h3>
<p>The standard script is asynchronous. But you can make it synchronous.</p>
<p>Change in the basic script _iqs.async = true to _iqs.async = false</p>
</div>
<div class="section" id="website-listener">
<h3><a class="toc-backref" href="#id23">Website listener</a><a class="headerlink" href="#website-listener" title="Permalink to this headline">¶</a></h3>
<p>Data in the webform is send when the form is submitted.</p>
<p>JQuery should be loaded, so put it in the page header:</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script type=&quot;text/javascript&quot; src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;
</pre></div>
</div>
<p>Set script variable &#8216;_iqTrackForm&#8217; as &#8216;true&#8217;</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script&gt;
var _iqTrackForm = true;
&lt;/script&gt;
</pre></div>
</div>
</div>
<div class="section" id="external-visitor-id">
<h3><a class="toc-backref" href="#id24">External visitor id</a><a class="headerlink" href="#external-visitor-id" title="Permalink to this headline">¶</a></h3>
<p>Read more: Identifying iqnomy visitors using custom id</p>
</div>
<div class="section" id="extra-custom-javascript-script">
<h3><a class="toc-backref" href="#id25">Extra custom javascript script</a><a class="headerlink" href="#extra-custom-javascript-script" title="Permalink to this headline">¶</a></h3>
<p>We can add extra custom javascript with the existing script. To get this extra javascrip you need to add an extra rule with the existing script.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">_iqsExtra</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Pay attention: before adding this rule the script needs to be available on the IQNOMY servers. You can check this with the URL:</p>
</div>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">http</span><span class="o">:</span><span class="c1">//static.iqnomy.com/myliquidsuite/js/tnt/pre_&lt;tenantId&gt;.js</span>
</pre></div>
</div>
<p><em>Complete example</em></p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script&gt;
  var _iqsTenant = &lt;tenantId&gt;;
  var _iqsImpress = { hostAndPort: &quot;liquifier.iqnomy.com&quot;, timeout: 5000 };
  var _iqsExtra = true;

  (function() {
    var _iqs = document.createElement(&#39;script&#39;); _iqs.type = &#39;text/javascript&#39;; _iqs.async = true;
    _iqs.src = (&#39;https:&#39; == document.location.protocol ? &#39;https://&#39; : &#39;http://&#39;) + &#39;static.iqnomy.com/myliquidsuite  /js/IQImpressor.js&#39;;
    var s = document.getElementsByTagName(&#39;script&#39;)[0]; s.parentNode.insertBefore(_iqs, s);
  })();
&lt;/script&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="event-data-with-websitescript">
<h2><a class="toc-backref" href="#id26">Event data with websitescript</a><a class="headerlink" href="#event-data-with-websitescript" title="Permalink to this headline">¶</a></h2>
<div class="section" id="different-methods">
<h3><a class="toc-backref" href="#id27">Different methods</a><a class="headerlink" href="#different-methods" title="Permalink to this headline">¶</a></h3>
<div class="section" id="example-1-sending-eventdata-at-pageload">
<h4><a class="toc-backref" href="#id28">Example 1 - Sending eventdata at pageload</a><a class="headerlink" href="#example-1-sending-eventdata-at-pageload" title="Permalink to this headline">¶</a></h4>
<p>prerequisite: The eventdata needs to be set and available before the IQNOMY script is loaded</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script&gt;

_iqsEventData = new Object();
_iqsEventData[&quot;page_type&quot;] = “home”

&lt;/script&gt;
</pre></div>
</div>
</div>
<div class="section" id="example-2-sending-eventdata-manually">
<h4><a class="toc-backref" href="#id29">Example 2 - Sending eventdata manually</a><a class="headerlink" href="#example-2-sending-eventdata-manually" title="Permalink to this headline">¶</a></h4>
<p>From the client using javascript</p>
<p>prerequisite:  The IQNOMY script needs to be loaded before able to call functions on the IQImpressor object.</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script&gt;

var eventData = new Object();
eventData[&quot;page_type&quot;] = “home”
IQImpressor.trackEvent(_iqsTenant, &#39;WEBSHOP&#39;, eventData);

&lt;script&gt;
</pre></div>
</div>
</div>
<div class="section" id="example-3-combine-sending-eventdata-at-pageload-and-sending-it-manually">
<h4><a class="toc-backref" href="#id30">Example 3 - Combine sending eventdata at pageload and sending it manually</a><a class="headerlink" href="#example-3-combine-sending-eventdata-at-pageload-and-sending-it-manually" title="Permalink to this headline">¶</a></h4>
<p>If you are unsure when the eventdata is available during the pageload you can use this option to be sure eventdata will be send to IQNOMY</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script&gt;

var eventData = new Object();
eventData[&quot;page_type&quot;] = “home”;

// If IQNOMY script is not loaded let the script pickup the data when the script loads
if(typeof IQImpressor === &quot;undefined&quot;) {
    _iqsEventData = eventData;
    console.log(&quot;Saving EventData to be picked up later.&quot;);
// Else send it manually
}else{
    IQImpressor.trackEvent(_iqsTenant, &#39;WEBSHOP&#39;, eventData);
    console.log(&quot;Sending EventData manually.&quot;);
}

&lt;script&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="custom-events">
<h3><a class="toc-backref" href="#id31">Custom events</a><a class="headerlink" href="#custom-events" title="Permalink to this headline">¶</a></h3>
<p>You can also assign the external id manually. By using the IQImpressor Javascript object, available after the IQNOMY script is initiated, you can manually track an event. By calling
IQImpressor.trackEvent(tenantId,eventName,eventdata) you can trigger an event that will link a custom external id, to the visitor visiting your website.</p>
<p>example:</p>
<div class="highlight-javascript"><div class="highlight"><pre>&lt;script type=&quot;text/javascript&quot;&gt;

    var tenantId = _iqsTenant
    var eventName = &#39;FORM&#39;
    var eventdata = new Object();
        eventdata[&quot;_iqExternalVisitorId&quot;] = &quot;company_user_id_1&quot;;

    // You can only call this function after the IQNOMY has initialised.
    IQImpressor.trackEvent(tenantId,eventName,eventdata);

    var _iqExternalVisitorId = &quot;company_user_id_1&quot;; &lt;/script&gt;
</pre></div>
</div>
<p>You can use both methods combined, but make sure that the given custom id is consistent, or external id of the visitor will change with the use of each method. Currently a IQNOMY user can only have one unique external id.</p>
<p>IQNOMY tracks visitors anonymously, so we advice not to use any privacy-sensitive custom id as an external id, like emailadresses.</p>
<div class="section" id="multiple-events">
<h4><a class="toc-backref" href="#id32">Multiple events</a><a class="headerlink" href="#multiple-events" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre>var eventData = new Object();

eventData[&quot;name&quot;] = “christian”
eventData[&quot;customer&quot;] = “true”
eventData[&quot;productid&quot;] = “40”
IQImpressor.trackEvent(_iqsTenant, &#39;WEBSHOP&#39;, eventData);
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-with-event-data">
<h3><a class="toc-backref" href="#id33">Testing with event data</a><a class="headerlink" href="#testing-with-event-data" title="Permalink to this headline">¶</a></h3>
<p>You can test this functionality in the console of your webbrowser. The results can be checked in the livestream.</p>
<div class="figure">
<img alt="../_images/EventData.png" src="../_images/EventData.png" />
</div>
</div>
</div>
</div>
<div class="section" id="filter-ip-adress">
<h1><a class="toc-backref" href="#id34">Filter IP adress</a><a class="headerlink" href="#filter-ip-adress" title="Permalink to this headline">¶</a></h1>
<p>In <em>Discovery</em> you can got to <em>IP-addresses</em></p>
<p>With this functionality you can filter based on ip-adress. After setting the filter the caching should be up to date after 10 minutes.</p>
<p>You can use the settings:
* Don&#8217;t filter (standard)
* Exclude all but this ip
* Accept all but this ip</p>
<p>You can use ranges</p>
<ul class="simple">
<li>Example 1: IQNOMY office extern (clients 193.172.34.65 t/m 193.172.34.78)</li>
</ul>
<p>IP-adress: 193.172.34.64
subnetmasker: 255.255.255.240</p>
<ul class="simple">
<li>Example 2: One specific IP-adress</li>
</ul>
<p>IP-adress: 193.172.34.66
subnetmasker: 255.255.255.255</p>
<p>Also IPv6 addresses can be used</p>
<ul class="simple">
<li>Example 3: One specific IPv6-adress</li>
</ul>
<p>IP-adress: fe80::c0f3:5b08:37d9:6e90
subnetmasker: fe80::c0f3:5b08:37d9:6e90</p>
<ul class="simple">
<li>Example 4: range IPv6</li>
</ul>
<p>IP-adress: fe80::
subnetmasker: fe80:</p>
<p>For ranges you can use: <a class="reference external" href="http://www.subnet-calculator.com/">http://www.subnet-calculator.com/</a></p>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="profile.html" class="btn btn-neutral float-right" title="Profile" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Developers" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IQNOMY.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>