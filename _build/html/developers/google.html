

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Google event tracking &mdash; IQNOMY 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="IQNOMY 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Developers" href="index.html"/>
        <link rel="next" title="&lt;no title&gt;" href="identification.html"/>
        <link rel="prev" title="Connect information with visitor profile" href="eventdata.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> IQNOMY</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../starthere/index.html">Start here</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../starthere/fiveminute.html">Five minute install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../starthere/gettingstarted.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../starthere/whyiqnomy.html">Why IQNOMY?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../administrators/index.html">Administrators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../administrators/containers.html">Containers</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="integration.html">Integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="script.html">Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html">Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="eventdata.html">Connect information with visitor profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="eventdata.html#ecommerce-site-integration">Ecommerce site integration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Google event tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#analytics-filter-iqnomy-crawl">Analytics filter IQNOMY crawl</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html">Omniture</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidcontentdev.html#layout-liquid-content">Layout liquid content</a></li>
<li class="toctree-l2"><a class="reference internal" href="magento.html">IQNOMY Magento extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theoryconcepts/index.html">Theory &amp; concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../theoryconcepts/platform.html">Platform</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/faq.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apis/index.html">APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apis/profiles.html">Profiles</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">IQNOMY</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developers</a> &raquo;</li>
      
    <li>Google event tracking</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/developers/google.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <p>Using the Google Tagmanager to integrate the IQNOMY script in your website.</p>
<p>[[Image:step1Tag.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step2Tag">File:step2Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step3Tag">File:step3Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step4Tag">File:step4Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step5Tag">File:step5Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step6Tag">File:step6Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step7Tag">File:step7Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step8Tag">File:step8Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step9Tag">File:step9Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step10Tag">File:step10Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>[[<a class="reference external" href="File:step11Tag">File:step11Tag</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<div class="section" id="google-event-tracking">
<h1>Google event tracking<a class="headerlink" href="#google-event-tracking" title="Permalink to this headline">¶</a></h1>
<p>Omdat google event niet altijd werd uitgevoerd op de door Google beschreven
manier. Hebben we dit onderzocht.</p>
<p>Vermoedelijk wordt de trackEvent in de onclick afgebroken doordat de link in de href (te snel) gevolgd wordt.
In het verleden heeft dit wel goed gewerkt, mogelijk is er iets veranderd in het Google script (asynchrone trackEvent?) waardoor dit anders is gaan werken.</p>
<p>Na wat zoeken:
<a class="reference external" href="http://stackoverflow.com/questions/17361992/google-analytics-events-canceled">http://stackoverflow.com/questions/17361992/google-analytics-events-canceled</a>
<a class="reference external" href="https://support.google.com/analytics/answer/1136920?hl=en-GB">https://support.google.com/analytics/answer/1136920?hl=en-GB</a>
<a class="reference external" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback">https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback</a></p>
<p>Gezien de bovenstaande artikelen lijkt het alsof we geluk hebben gehad dat het eerder wel gewerkt heeft
Oplossing</p>
<p>De oplossing lijkt om een time-out in te bouwen bij elke link waar trackEvent toegepast wordt.
Zoiets als:</p>
<p>Vermoedelijk wordt de trackEvent in de onclick afgebroken doordat de link in de href (te snel) gevolgd wordt.
In het verleden heeft dit wel goed gewerkt, mogelijk is er iets veranderd in het Google script (asynchrone trackEvent?) waardoor dit anders is gaan werken.</p>
<p>Na wat zoeken:
<a class="reference external" href="http://stackoverflow.com/questions/17361992/google-analytics-events-canceled">http://stackoverflow.com/questions/17361992/google-analytics-events-canceled</a>
<a class="reference external" href="https://support.google.com/analytics/answer/1136920?hl=en-GB">https://support.google.com/analytics/answer/1136920?hl=en-GB</a>
<a class="reference external" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback">https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#hitCallback</a></p>
<p>Gezien de bovenstaande artikelen lijkt het alsof we geluk hebben gehad dat het eerder wel gewerkt heeft
Oplossing</p>
<p>De oplossing lijkt om een time-out in te bouwen bij elke link waar trackEvent toegepast wordt.
Zoiets als:</p>
<p>&lt;script type=&#8221;text/javascript&#8221;&gt;
function trackOutboundLink(link, category, action) {</p>
<blockquote>
<div><dl class="docutils">
<dt>try {</dt>
<dd>_gaq.push([&#8216;_trackEvent&#8217;, category , action]);</dd>
</dl>
<p>} catch(err){}</p>
<dl class="docutils">
<dt>setTimeout(function() {</dt>
<dd>document.location.href = link.href;</dd>
</dl>
<p>}, 100);</p>
</div></blockquote>
<p>}
&lt;/script&gt;</p>
<p>&lt;a href=&#8221;<a class="reference external" href="http://www.example.com">http://www.example.com</a>&#8221; onClick=&#8221;trackOutboundLink(this, &#8216;Outbound Links&#8217;, &#8216;example.com&#8217;); return false;&#8221;&gt;</p>
<p>Google Event Tracking</p>
<p>Er komt een nieuwe versie van analytics, genaamd Universal Analytics. Hier twee voorbeelden van de oude en nieuwe variant.
Classic Analytics ga.js</p>
<p><a class="reference external" href="https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide?hl=nl">https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide?hl=nl</a>
Specification:</p>
<p>_trackEvent(category, action, opt_label, opt_value, opt_noninteraction)</p>
<p>Example:</p>
<p>&lt;a href=&#8221;#&#8221; onClick=&#8221;_gaq.push([&#8216;_trackEvent&#8217;, &#8216;Videos&#8217;, &#8216;Play&#8217;, &#8216;Baby&#8217;s First Birthday&#8217;]);&#8221;&gt;Play&lt;/a&gt;</p>
<p>Universal Analytics analytics.js</p>
<p><a class="reference external" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=nl">https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=nl</a>
Specification:</p>
<p>ga(&#8216;send&#8217;, &#8216;event&#8217;, &#8216;category&#8217;, &#8216;action&#8217;, &#8216;label&#8217;, value, {&#8216;nonInteraction&#8217;: 1});  // value is a number.</p>
<p>Example:</p>
<p>&lt;a href=&#8221;#&#8221; onClick=&#8221;ga(&#8216;send&#8217;, &#8216;event&#8217;, &#8216;Videos&#8217;, &#8216;Play&#8217;, &#8216;Baby&#8217;s First Birthday&#8217;);&#8221;&gt;Play&lt;/a&gt;</p>
<blockquote>
<div><p>&lt;nowiki&gt;
&lt;script type=&#8221;text/javascript&#8221;&gt;
function trackOutboundLink(link, category, action) {</p>
<blockquote>
<div><dl class="docutils">
<dt>try {</dt>
<dd>_gaq.push([&#8216;_trackEvent&#8217;, category , action]);</dd>
</dl>
<p>} catch(err){}</p>
<dl class="docutils">
<dt>setTimeout(function() {</dt>
<dd>document.location.href = link.href;</dd>
</dl>
<p>}, 100);</p>
</div></blockquote>
<p>}
&lt;/script&gt;
&lt;/nowiki&gt;</p>
<p>&lt;a href=&#8221;<a class="reference external" href="http://www.example.com">http://www.example.com</a>&#8221; onClick=&#8221;trackOutboundLink(this, &#8216;Outbound Links&#8217;, &#8216;example.com&#8217;); return false;&#8221;&gt;</p>
</div></blockquote>
<p>=Google Event Tracking=</p>
<p>Er komt een nieuwe versie van analytics, genaamd Universal Analytics. Hier twee voorbeelden van de oude en nieuwe variant.
=Classic Analytics ga.js=</p>
<p><a class="reference external" href="https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide?hl=nl">https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide?hl=nl</a>
Specification:</p>
<blockquote>
<div>_trackEvent(category, action, opt_label, opt_value, opt_noninteraction)</div></blockquote>
<p>Example:</p>
<blockquote>
<div>&lt;a href=&#8221;#&#8221; onClick=&#8221;_gaq.push([&#8216;_trackEvent&#8217;, &#8216;Videos&#8217;, &#8216;Play&#8217;, &#8216;Baby&#8217;s First Birthday&#8217;]);&#8221;&gt;Play&lt;/a&gt;</div></blockquote>
<p>==Universal Analytics analytics.js==</p>
<p><a class="reference external" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=nl">https://developers.google.com/analytics/devguides/collection/analyticsjs/events?hl=nl</a>
Specification:</p>
<blockquote>
<div>ga(&#8216;send&#8217;, &#8216;event&#8217;, &#8216;category&#8217;, &#8216;action&#8217;, &#8216;label&#8217;, value, {&#8216;nonInteraction&#8217;: 1});  // value is a number.</div></blockquote>
<p>Example:</p>
<blockquote>
<div>&lt;a href=&#8221;#&#8221; onClick=&#8221;ga(&#8216;send&#8217;, &#8216;event&#8217;, &#8216;Videos&#8217;, &#8216;Play&#8217;, &#8216;Baby&#8217;s First Birthday&#8217;);&#8221;&gt;Play&lt;/a&gt;</div></blockquote>
</div>
<div class="section" id="analytics-filter-iqnomy-crawl">
<h1>Analytics filter IQNOMY crawl<a class="headerlink" href="#analytics-filter-iqnomy-crawl" title="Permalink to this headline">¶</a></h1>
<p>To collect content en thumbs of your website IQNOMY visits the URL&#8217;s from your website. Search engines do the same thing to collect this data. Filter these statistics out of you website statistics based on the useragent &#8216;&#8217;Iqnomybot&#8217;&#8216;.</p>
<p>IQNOMY analyses your website. The webstatistics application you use can be influenced in the statistics. We perform two actions regarding your website.
#Make a &#8216;&#8217;&#8216;thumb&#8217;&#8216;&#8217; of your websitepage. This thumb is a small screenshot of your webpage.
#&#8217;&#8216;&#8217;Crawl&#8217;&#8216;&#8217; content. If a visitor visits our website we get the same URL the visitor has in the browser. You can strip parts of this URL, [[Websites|parameters]], from this URL. Example: A visitor visits IQNOMY&#8217;s website and asks a question. The URL will be: <a class="reference external" href="http://www.iqnomy.com/search/search.php?question=statistics">http://www.iqnomy.com/search/search.php?question=statistics</a></p>
<p>This is an unique URL and we would get the content and make a thumb of this URL. By stripping the URL&#8217;s [[Websites|parameters]] IQNOMY has a &#8216;&#8217;clean&#8217;&#8217; URL to visit. <a class="reference external" href="http://www.iqnomy.com/search/search.php">http://www.iqnomy.com/search/search.php</a></p>
<p>If you don&#8217;t do this other applications and your webstatistics can be influenced by the visit of IQNOMY.</p>
<p>&#8216;&#8217;&#8216;Iqnomybot as a useragent&#8217;&#8216;&#8217;</p>
<p>The &#8216;Iqnomybot&#8217; is a so-called useragent. If a website is visited your site receives information from this visitor like browsertype. This browsertype is the useragent. This way a website can provide content suited for this useragent. e.g. Visitors with Internet Explorer 6 and 7 can have a different layout.</p>
<p>Useragent &#8216;Iqnomybot&#8217; has also an URL so systemadministrators can see what kind of visitor this is. This way the useragent can be filtered from statistics and applications.</p>
<p>=Filtering in Google analytics=
Google Analytics provides you filter options. Filters are applied to the information coming into your account, to manipulate the final data in order to provide accurate reports. These filters can be set up to exclude visits from particular IP addresses, to report only on a subdomain or directory, or to take dynamic page URLs and convert them into readable text strings.</p>
<p>Google Analytics provides you with three predefined filter types, as well as a number of custom options. [<a class="reference external" href="https://www.google.com/support/googleanalytics/bin/answer.py?answer=55593">https://www.google.com/support/googleanalytics/bin/answer.py?answer=55593</a>]</p>
<p>==Where to find the filters?==
[[<a class="reference external" href="File:CreateFilter">File:CreateFilter</a>.png|400px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
<p>==Filter configuration for IQNOMY==</p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>Custom filter
<a href="#id3"><span class="problematic" id="id4">*</span></a>Exclude
<a href="#id5"><span class="problematic" id="id6">*</span></a>Visitors ISP Organization
<a href="#id7"><span class="problematic" id="id8">*</span></a>asknow solutions b.v.
<a href="#id9"><span class="problematic" id="id10">*</span></a>Case sensitive: no
<a href="#id11"><span class="problematic" id="id12">*</span></a>And select you website profile.</p>
<p>See image below for configuration.</p>
<p>[[<a class="reference external" href="File:Filter">File:Filter</a>.png|600px]]
&#8216;&#8217;Click on image to enlarge&#8217;&#8216;</p>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="identification.html" class="btn btn-neutral float-right" title="&lt;no title&gt;"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="eventdata.html" class="btn btn-neutral" title="Connect information with visitor profile"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Christian Vriens.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>